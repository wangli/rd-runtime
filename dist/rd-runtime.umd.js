(function(P,h){typeof exports=="object"&&typeof module<"u"?h(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],h):(P=typeof globalThis<"u"?globalThis:P||self,h(P["rd-runtime"]={},P.Vue))})(this,function(P,h){"use strict";var Cn=document.createElement("style");Cn.textContent=`@keyframes vx_enter{0%{opacity:0;transform:translateY(-20%)}to{opacity:1;transform:translateY(0)}}.anim_rotate_left{animation:vx_rotate_left 9s linear infinite}.anim_rotate_right{animation:vx_rotate_right 9s linear infinite}.anim_float{animation:vx_float 6s linear infinite}.animate__fadeInDown{animation:fadeInDown 1s}@keyframes fadeInDown{0%{opacity:0;transform:translateY(-100%)}to{opacity:1;transform:translateY(0)}}@keyframes vx_float{0%{transform:translateY(0)}50%{transform:translateY(-20px)}to{transform:translateY(0)}}@keyframes vx_rotate_left{0%{transform:rotate(360deg)}to{transform:rotate(0)}}@keyframes vx_rotate_right{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`,document.head.appendChild(Cn);function Ui(e){const t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const n in e)if(n!=="default"){const r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:()=>e[n]})}}return t.default=e,Object.freeze(t)}function Ni(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}const qi=Ui(h);var Ke=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Fi=typeof Ke=="object"&&Ke&&Ke.Object===Object&&Ke,Mn=Fi,Hi=Mn,Bi=typeof self=="object"&&self&&self.Object===Object&&self,Ki=Hi||Bi||Function("return this")(),$e=Ki,Vi=$e,Yi=Vi.Symbol,Pt=Yi,In=Pt,Pn=Object.prototype,Wi=Pn.hasOwnProperty,Ji=Pn.toString,Ve=In?In.toStringTag:void 0;function Zi(e){var t=Wi.call(e,Ve),n=e[Ve];try{e[Ve]=void 0;var r=!0}catch{}var s=Ji.call(e);return r&&(t?e[Ve]=n:delete e[Ve]),s}var Xi=Zi,Qi=Object.prototype,es=Qi.toString;function ts(e){return es.call(e)}var ns=ts,kn=Pt,rs=Xi,is=ns,ss="[object Null]",os="[object Undefined]",zn=kn?kn.toStringTag:void 0;function as(e){return e==null?e===void 0?os:ss:zn&&zn in Object(e)?rs(e):is(e)}var Ye=as;function ls(e,t){return function(n){return e(t(n))}}var cs=ls,us=cs,fs=us(Object.getPrototypeOf,Object),Rn=fs;function ds(e){return e!=null&&typeof e=="object"}var Te=ds,ps=Ye,hs=Rn,ys=Te,gs="[object Object]",vs=Function.prototype,ms=Object.prototype,Ln=vs.toString,bs=ms.hasOwnProperty,_s=Ln.call(Object);function $s(e){if(!ys(e)||ps(e)!=gs)return!1;var t=hs(e);if(t===null)return!0;var n=bs.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&Ln.call(n)==_s}var Q=$s,We={},ws={get exports(){return We},set exports(e){We=e}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(c,f,d){this.fn=c,this.context=f,this.once=d||!1}function o(c,f,d,u,v){if(typeof d!="function")throw new TypeError("The listener must be a function");var E=new s(d,u||c,v),O=n?n+f:f;return c._events[O]?c._events[O].fn?c._events[O]=[c._events[O],E]:c._events[O].push(E):(c._events[O]=E,c._eventsCount++),c}function a(c,f){--c._eventsCount===0?c._events=new r:delete c._events[f]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var f=[],d,u;if(this._eventsCount===0)return f;for(u in d=this._events)t.call(d,u)&&f.push(n?u.slice(1):u);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(d)):f},l.prototype.listeners=function(f){var d=n?n+f:f,u=this._events[d];if(!u)return[];if(u.fn)return[u.fn];for(var v=0,E=u.length,O=new Array(E);v<E;v++)O[v]=u[v].fn;return O},l.prototype.listenerCount=function(f){var d=n?n+f:f,u=this._events[d];return u?u.fn?1:u.length:0},l.prototype.emit=function(f,d,u,v,E,O){var W=n?n+f:f;if(!this._events[W])return!1;var w=this._events[W],fe=arguments.length,pe,z;if(w.fn){switch(w.once&&this.removeListener(f,w.fn,void 0,!0),fe){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,d),!0;case 3:return w.fn.call(w.context,d,u),!0;case 4:return w.fn.call(w.context,d,u,v),!0;case 5:return w.fn.call(w.context,d,u,v,E),!0;case 6:return w.fn.call(w.context,d,u,v,E,O),!0}for(z=1,pe=new Array(fe-1);z<fe;z++)pe[z-1]=arguments[z];w.fn.apply(w.context,pe)}else{var Dn=w.length,se;for(z=0;z<Dn;z++)switch(w[z].once&&this.removeListener(f,w[z].fn,void 0,!0),fe){case 1:w[z].fn.call(w[z].context);break;case 2:w[z].fn.call(w[z].context,d);break;case 3:w[z].fn.call(w[z].context,d,u);break;case 4:w[z].fn.call(w[z].context,d,u,v);break;default:if(!pe)for(se=1,pe=new Array(fe-1);se<fe;se++)pe[se-1]=arguments[se];w[z].fn.apply(w[z].context,pe)}}return!0},l.prototype.on=function(f,d,u){return o(this,f,d,u,!1)},l.prototype.once=function(f,d,u){return o(this,f,d,u,!0)},l.prototype.removeListener=function(f,d,u,v){var E=n?n+f:f;if(!this._events[E])return this;if(!d)return a(this,E),this;var O=this._events[E];if(O.fn)O.fn===d&&(!v||O.once)&&(!u||O.context===u)&&a(this,E);else{for(var W=0,w=[],fe=O.length;W<fe;W++)(O[W].fn!==d||v&&!O[W].once||u&&O[W].context!==u)&&w.push(O[W]);w.length?this._events[E]=w.length===1?w[0]:w:a(this,E)}return this},l.prototype.removeAllListeners=function(f){var d;return f?(d=n?n+f:f,this._events[d]&&a(this,d)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,e.exports=l})(ws);const Je={},Os=10;function Ss(e){var t=!0,n=new Date().getTime();return Je[e]?(n-Je[e].time<Os&&(t=!1),Je[e].count++,Je[e].time=n):Je[e]={count:1,time:n},t}const R={CLICK_STAGE:"click-stage",CLICK_BACKGROUND:"click-background",CLICK_SPRITE:"click-sprite",DBLCLICK_SPRITE:"dblclick-sprite",MOUSEDOWN_BACKGROUND:"mousedown-background",MOUSEUP_BACKGROUND:"mouseup-background",MOUSEOVER_SPRITE:"mouseover-sprite",MOUSEOUT_SPRITE:"mouseout-sprite",MOUSEDOWN_SPRITE:"mousedown-sprite",MOUSEUP_SPRITE:"mouseup-sprite",MOUSEENTER_SPRITE:"mouseenter-sprite",MOUSELEAVE_SPRITE:"mouseleave-sprite",STAGE_MOUNTED:"stage-mounted",DATA_LOADED:"data-loaded",PAGE_STATE:"page-state"},Ce={ACTION:"action",APP_ACTION:"appAction"};var lt={},xs={get exports(){return lt},set exports(e){lt=e}};(function(e,t){(function(n,r){e.exports=r()})(Ke,function(){var n=1e3,r=6e4,s=36e5,o="millisecond",a="second",l="minute",c="hour",f="day",d="week",u="month",v="quarter",E="year",O="date",W="Invalid Date",w=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,fe=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,pe={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(m){var g=["th","st","nd","rd"],p=m%100;return"["+m+(g[(p-20)%10]||g[p]||g[0])+"]"}},z=function(m,g,p){var b=String(m);return!b||b.length>=g?m:""+Array(g+1-b.length).join(p)+m},Dn={s:z,z:function(m){var g=-m.utcOffset(),p=Math.abs(g),b=Math.floor(p/60),y=p%60;return(g<=0?"+":"-")+z(b,2,"0")+":"+z(y,2,"0")},m:function m(g,p){if(g.date()<p.date())return-m(p,g);var b=12*(p.year()-g.year())+(p.month()-g.month()),y=g.clone().add(b,u),$=p-y<0,_=g.clone().add(b+($?-1:1),u);return+(-(b+(p-y)/($?y-_:_-y))||0)},a:function(m){return m<0?Math.ceil(m)||0:Math.floor(m)},p:function(m){return{M:u,y:E,w:d,d:f,D:O,h:c,m:l,s:a,ms:o,Q:v}[m]||String(m||"").toLowerCase().replace(/s$/,"")},u:function(m){return m===void 0}},se="en",je={};je[se]=pe;var jn=function(m){return m instanceof Mt},Ct=function m(g,p,b){var y;if(!g)return se;if(typeof g=="string"){var $=g.toLowerCase();je[$]&&(y=$),p&&(je[$]=p,y=$);var _=g.split("-");if(!y&&_.length>1)return m(_[0])}else{var T=g.name;je[T]=g,y=T}return!b&&y&&(se=y),y||!b&&se},N=function(m,g){if(jn(m))return m.clone();var p=typeof g=="object"?g:{};return p.date=m,p.args=arguments,new Mt(p)},C=Dn;C.l=Ct,C.i=jn,C.w=function(m,g){return N(m,{locale:g.$L,utc:g.$u,x:g.$x,$offset:g.$offset})};var Mt=function(){function m(p){this.$L=Ct(p.locale,null,!0),this.parse(p)}var g=m.prototype;return g.parse=function(p){this.$d=function(b){var y=b.date,$=b.utc;if(y===null)return new Date(NaN);if(C.u(y))return new Date;if(y instanceof Date)return new Date(y);if(typeof y=="string"&&!/Z$/i.test(y)){var _=y.match(w);if(_){var T=_[2]-1||0,U=(_[7]||"0").substring(0,3);return $?new Date(Date.UTC(_[1],T,_[3]||1,_[4]||0,_[5]||0,_[6]||0,U)):new Date(_[1],T,_[3]||1,_[4]||0,_[5]||0,_[6]||0,U)}}return new Date(y)}(p),this.$x=p.x||{},this.init()},g.init=function(){var p=this.$d;this.$y=p.getFullYear(),this.$M=p.getMonth(),this.$D=p.getDate(),this.$W=p.getDay(),this.$H=p.getHours(),this.$m=p.getMinutes(),this.$s=p.getSeconds(),this.$ms=p.getMilliseconds()},g.$utils=function(){return C},g.isValid=function(){return this.$d.toString()!==W},g.isSame=function(p,b){var y=N(p);return this.startOf(b)<=y&&y<=this.endOf(b)},g.isAfter=function(p,b){return N(p)<this.startOf(b)},g.isBefore=function(p,b){return this.endOf(b)<N(p)},g.$g=function(p,b,y){return C.u(p)?this[b]:this.set(y,p)},g.unix=function(){return Math.floor(this.valueOf()/1e3)},g.valueOf=function(){return this.$d.getTime()},g.startOf=function(p,b){var y=this,$=!!C.u(b)||b,_=C.p(p),T=function(Be,J){var _e=C.w(y.$u?Date.UTC(y.$y,J,Be):new Date(y.$y,J,Be),y);return $?_e:_e.endOf(f)},U=function(Be,J){return C.w(y.toDate()[Be].apply(y.toDate("s"),($?[0,0,0,0]:[23,59,59,999]).slice(J)),y)},L=this.$W,H=this.$M,be=this.$D,he="set"+(this.$u?"UTC":"");switch(_){case E:return $?T(1,0):T(31,11);case u:return $?T(1,H):T(0,H+1);case d:var ot=this.$locale().weekStart||0,at=(L<ot?L+7:L)-ot;return T($?be-at:be+(6-at),H);case f:case O:return U(he+"Hours",0);case c:return U(he+"Minutes",1);case l:return U(he+"Seconds",2);case a:return U(he+"Milliseconds",3);default:return this.clone()}},g.endOf=function(p){return this.startOf(p,!1)},g.$set=function(p,b){var y,$=C.p(p),_="set"+(this.$u?"UTC":""),T=(y={},y[f]=_+"Date",y[O]=_+"Date",y[u]=_+"Month",y[E]=_+"FullYear",y[c]=_+"Hours",y[l]=_+"Minutes",y[a]=_+"Seconds",y[o]=_+"Milliseconds",y)[$],U=$===f?this.$D+(b-this.$W):b;if($===u||$===E){var L=this.clone().set(O,1);L.$d[T](U),L.init(),this.$d=L.set(O,Math.min(this.$D,L.daysInMonth())).$d}else T&&this.$d[T](U);return this.init(),this},g.set=function(p,b){return this.clone().$set(p,b)},g.get=function(p){return this[C.p(p)]()},g.add=function(p,b){var y,$=this;p=Number(p);var _=C.p(b),T=function(H){var be=N($);return C.w(be.date(be.date()+Math.round(H*p)),$)};if(_===u)return this.set(u,this.$M+p);if(_===E)return this.set(E,this.$y+p);if(_===f)return T(1);if(_===d)return T(7);var U=(y={},y[l]=r,y[c]=s,y[a]=n,y)[_]||1,L=this.$d.getTime()+p*U;return C.w(L,this)},g.subtract=function(p,b){return this.add(-1*p,b)},g.format=function(p){var b=this,y=this.$locale();if(!this.isValid())return y.invalidDate||W;var $=p||"YYYY-MM-DDTHH:mm:ssZ",_=C.z(this),T=this.$H,U=this.$m,L=this.$M,H=y.weekdays,be=y.months,he=function(J,_e,Tn,It){return J&&(J[_e]||J(b,$))||Tn[_e].slice(0,It)},ot=function(J){return C.s(T%12||12,J,"0")},at=y.meridiem||function(J,_e,Tn){var It=J<12?"AM":"PM";return Tn?It.toLowerCase():It},Be={YY:String(this.$y).slice(-2),YYYY:this.$y,M:L+1,MM:C.s(L+1,2,"0"),MMM:he(y.monthsShort,L,be,3),MMMM:he(be,L),D:this.$D,DD:C.s(this.$D,2,"0"),d:String(this.$W),dd:he(y.weekdaysMin,this.$W,H,2),ddd:he(y.weekdaysShort,this.$W,H,3),dddd:H[this.$W],H:String(T),HH:C.s(T,2,"0"),h:ot(1),hh:ot(2),a:at(T,U,!0),A:at(T,U,!1),m:String(U),mm:C.s(U,2,"0"),s:String(this.$s),ss:C.s(this.$s,2,"0"),SSS:C.s(this.$ms,3,"0"),Z:_};return $.replace(fe,function(J,_e){return _e||Be[J]||_.replace(":","")})},g.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},g.diff=function(p,b,y){var $,_=C.p(b),T=N(p),U=(T.utcOffset()-this.utcOffset())*r,L=this-T,H=C.m(this,T);return H=($={},$[E]=H/12,$[u]=H,$[v]=H/3,$[d]=(L-U)/6048e5,$[f]=(L-U)/864e5,$[c]=L/s,$[l]=L/r,$[a]=L/n,$)[_]||L,y?H:C.a(H)},g.daysInMonth=function(){return this.endOf(u).$D},g.$locale=function(){return je[this.$L]},g.locale=function(p,b){if(!p)return this.$L;var y=this.clone(),$=Ct(p,b,!0);return $&&(y.$L=$),y},g.clone=function(){return C.w(this.$d,this)},g.toDate=function(){return new Date(this.valueOf())},g.toJSON=function(){return this.isValid()?this.toISOString():null},g.toISOString=function(){return this.$d.toISOString()},g.toString=function(){return this.$d.toUTCString()},m}(),Gi=Mt.prototype;return N.prototype=Gi,[["$ms",o],["$s",a],["$m",l],["$H",c],["$W",f],["$M",u],["$y",E],["$D",O]].forEach(function(m){Gi[m[1]]=function(g){return this.$g(g,m[0],m[1])}}),N.extend=function(m,g){return m.$i||(m(g,Mt,N),m.$i=!0),N},N.locale=Ct,N.isDayjs=jn,N.unix=function(m){return N(1e3*m)},N.en=je[se],N.Ls=je,N.p={},N})})(xs);const Gn=Ni({__proto__:null,default:lt},[lt]),Un={dayjs(e,t){return Gn(e).format(t)}},Me=function(e,t,n,r){let s=e;if(t){let o=t.split(".");for(let a of o)if(typeof s[a]<"u")s=s[a];else{s=null;break}}else return typeof r=="object"&&r.func?Un[r.func].call(null,s,r.rule):s;return n&&s instanceof Array?s.map(o=>Me(o,n,null,r)):typeof r=="object"&&r.func?Un[r.func].call(null,s,r.rule):s},kt=function(e,t){if(t&&Q(t)&&t.y&&t.y instanceof Array&&t.y.length>0){let n=[];if(t.x&&t.x.name&&t.x.path){n.push([t.x.name]);let r=Me(e,t.x.path,t.x.mapKey,t.x.format);r&&r.forEach((s,o)=>{n[o+1]=[s]}),t.y.forEach(s=>{n[0].push(s.name);let o=Me(e,s.path,s.mapKey,s.format);o&&o instanceof Array&&o.forEach((a,l)=>{n[l+1]?n[l+1].push(a):n[l+1]=[a]})})}else t.y.forEach((r,s)=>{let o=Me(e,r.path,r.mapKey,r.format);o&&o instanceof Array&&(s==0?n.push([r.name]):n[0].push(r.name),o.forEach((a,l)=>{n[l+1]?n[l+1].push(a):n[l+1]=[a]}))});return n}else{if(t&&Q(t)&&t.name&&t.path)return{[t.name]:Me(e,t.path,t.mapKey,t.format)};if(t&&t instanceof Array){let n={};return t.forEach(r=>{n[r.name]=Me(e,r.path,r.mapKey,r.format)}),n}else return console.log("数据未处理"),e}},B=function(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}else return e?JSON.parse(JSON.stringify(e)):{}},As=function(){const e=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return e()+e()+e()+e()+e()+e()+e()+e()};let oe={};const Es={add(e,t,n){let r=t||1e3,s=n||"id_"+new Date().getTime()+Math.floor(Math.random()*1e3);return oe[s]&&clearInterval(oe[s]),oe[s]=setInterval(e,r),s},del(e){if(e)oe[e]&&(clearInterval(oe[e]),delete oe[e]);else{for(const t in oe)Object.hasOwnProperty.call(oe,t)&&clearInterval(oe[t]);oe={}}}};let ae={};const Ds={add(e,t,n){let r=t||1e3,s=n||"id_"+new Date().getTime()+Math.floor(Math.random()*1e3);return ae[s]&&clearTimeout(ae[s]),ae[s]=setTimeout(e,r),s},del(e){if(e)ae[e]&&(clearTimeout(ae[e]),delete ae[e]);else{for(const t in ae)Object.hasOwnProperty.call(ae,t)&&clearTimeout(ae[t]);ae={}}}},zt=function(e){return e?Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&"):""},le=function(e,t,n){if(e&&e instanceof Array){let r=t?e.findIndex(s=>s[t]==n):e.findIndex(s=>s==n);return r>-1?e.splice(r,1):!1}else return!1},Nn=function(e,t=!0){let n=location.href.slice(location.href.lastIndexOf("?")),r={},s=/([^?=&#]+)=([^?=&#]+)/g;return n.replace(s,(o,a,l)=>r[a]=t?decodeURIComponent(l):l),e?r[e]||"":r},js=Object.freeze(Object.defineProperty({__proto__:null,dayjs:Gn,extractData:kt,getUrlParam:Nn,guid:As,interval:Es,jsonData:B,jsonToParams:zt,removeArray:le,timeout:Ds},Symbol.toStringTag,{value:"Module"})),ye=new We,S={addEventListener(e,t,n=null){ye.on(e,t,n)},removeEventListener(e,t,n){n&&t?ye.off(e,t,n):t?ye.off(e,t):ye.off(e)},clear(e){ye.removeAllListeners(e)},emit(e,t,n=!1){if(typeof n=="boolean"&&n)ye.emit(e,t);else if(Ss(e)){let r=arguments.length;if(r<=3)ye.emit(e,t,n);else{let s=[];for(i=1;i<r;i++)s[0]=arguments[i];ye.emit(e,...s)}}},execute(e,t=""){let n={target:t,data:B(e)};this.emit(Ce.ACTION,n)},message(e){this.emit("message-send",e)},running(e,t){this.emit("run_function_"+e,t)},reviewData(e,t){this.emit(Ce.ACTION,{data:{action:"reviewData",target:e,value:t}})}},j={width:1920,height:1080,backgroundColor:"#222222",scaleMode:"auto",interaction:!1,clickCursor:"auto",scale:!1,status:"none",dom:null};let K=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e));for(;e--;){let r=n[e]&63;r<36?t+=r.toString(36):r<62?t+=(r-26).toString(36).toUpperCase():r<63?t+="_":t+="-"}return t};function ct(e,t,n,r){e&&e.getAttribute&&e.getAttribute(t)&&e.dispatchEvent(new CustomEvent(t,{detail:{component:n,value:r}}))}const Rt={},qn={add(e){e.id&&(Rt[e.id]=e)},del(e){e.id&&delete Rt[e.id]},get items(){return Rt}},ut={props:{id:{type:String,default:""},visible:{type:Boolean,default:!0},x:{type:Number,default:0},y:{type:Number,default:0},width:{type:Number,default:0},height:{type:Number,default:0},opacity:{type:Number,default:100},angle:{type:Number,default:0},border:{type:Object,default(){return{}}},padding:{type:String,default:""},background:{type:Object,default(){return{}}},shadow:{type:Object,default(){return{}}},zIndex:{type:Number,default:0},events:{type:Array,default(){return[]}},options:{type:Object,default(){return{}}},selected:{type:Boolean,default:!1},lock:{type:Boolean,default:!1},hover:{type:Boolean,default:!1},bind:{type:Boolean,default:!1},anim:{type:Object,default(){return{}}},data:[String,Number,Object,Array],title:String},computed:{rect(){return{x:this.x,y:this.y,width:this.width,height:this.height}},style(){let e=typeof this.anim=="object"&&this.anim.options?this.anim.options:{};return{position:"absolute",width:this.width>0?this.width+"px":"auto",height:this.height>0?this.height+"px":"auto",top:this.y+"px",left:this.x+"px",zIndex:this.selected?1e5+this.zIndex:this.zIndex,transform:"rotate("+this.angle+"deg)",opacity:this.opacity/100,padding:this.padding,...this.border,...this.background,...this.shadow,...e}}},created(){this.AppSetup=j,qn.add(this),this.id&&S.addEventListener(`run_function_${this.id}`,e=>{this.cmdRunning&&this.cmdRunning(e)})},mounted(){ct(this.$el,"timeout",this,"mounted"),ct(this.$el,"interval",this,"mounted")},beforeUnmount(){qn.del(this),this.id&&S.removeEventListener(`run_function_${this.id}`),ct(this.$el,"timeout",this,"beforeUnmount"),ct(this.$el,"interval",this,"beforeUnmount")}};function Ts(){this.__data__=[],this.size=0}var Cs=Ts;function Ms(e,t){return e===t||e!==e&&t!==t}var ft=Ms,Is=ft;function Ps(e,t){for(var n=e.length;n--;)if(Is(e[n][0],t))return n;return-1}var dt=Ps,ks=dt,zs=Array.prototype,Rs=zs.splice;function Ls(e){var t=this.__data__,n=ks(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():Rs.call(t,n,1),--this.size,!0}var Gs=Ls,Us=dt;function Ns(e){var t=this.__data__,n=Us(t,e);return n<0?void 0:t[n][1]}var qs=Ns,Fs=dt;function Hs(e){return Fs(this.__data__,e)>-1}var Bs=Hs,Ks=dt;function Vs(e,t){var n=this.__data__,r=Ks(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var Ys=Vs,Ws=Cs,Js=Gs,Zs=qs,Xs=Bs,Qs=Ys;function Ie(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Ie.prototype.clear=Ws,Ie.prototype.delete=Js,Ie.prototype.get=Zs,Ie.prototype.has=Xs,Ie.prototype.set=Qs;var pt=Ie,eo=pt;function to(){this.__data__=new eo,this.size=0}var no=to;function ro(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var io=ro;function so(e){return this.__data__.get(e)}var oo=so;function ao(e){return this.__data__.has(e)}var lo=ao;function co(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var we=co,uo=Ye,fo=we,po="[object AsyncFunction]",ho="[object Function]",yo="[object GeneratorFunction]",go="[object Proxy]";function vo(e){if(!fo(e))return!1;var t=uo(e);return t==ho||t==yo||t==po||t==go}var Lt=vo,mo=$e,bo=mo["__core-js_shared__"],_o=bo,Gt=_o,Fn=function(){var e=/[^.]+$/.exec(Gt&&Gt.keys&&Gt.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function $o(e){return!!Fn&&Fn in e}var wo=$o,Oo=Function.prototype,So=Oo.toString;function xo(e){if(e!=null){try{return So.call(e)}catch{}try{return e+""}catch{}}return""}var Ao=xo,Eo=Lt,Do=wo,jo=we,To=Ao,Co=/[\\^$.*+?()[\]{}|]/g,Mo=/^\[object .+?Constructor\]$/,Io=Function.prototype,Po=Object.prototype,ko=Io.toString,zo=Po.hasOwnProperty,Ro=RegExp("^"+ko.call(zo).replace(Co,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Lo(e){if(!jo(e)||Do(e))return!1;var t=Eo(e)?Ro:Mo;return t.test(To(e))}var Go=Lo;function Uo(e,t){return e==null?void 0:e[t]}var No=Uo,qo=Go,Fo=No;function Ho(e,t){var n=Fo(e,t);return qo(n)?n:void 0}var Ut=Ho,Bo=Ut,Ko=$e,Vo=Bo(Ko,"Map"),Hn=Vo,Yo=Ut,Wo=Yo(Object,"create"),ht=Wo,Bn=ht;function Jo(){this.__data__=Bn?Bn(null):{},this.size=0}var Zo=Jo;function Xo(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Qo=Xo,ea=ht,ta="__lodash_hash_undefined__",na=Object.prototype,ra=na.hasOwnProperty;function ia(e){var t=this.__data__;if(ea){var n=t[e];return n===ta?void 0:n}return ra.call(t,e)?t[e]:void 0}var sa=ia,oa=ht,aa=Object.prototype,la=aa.hasOwnProperty;function ca(e){var t=this.__data__;return oa?t[e]!==void 0:la.call(t,e)}var ua=ca,fa=ht,da="__lodash_hash_undefined__";function pa(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=fa&&t===void 0?da:t,this}var ha=pa,ya=Zo,ga=Qo,va=sa,ma=ua,ba=ha;function Pe(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Pe.prototype.clear=ya,Pe.prototype.delete=ga,Pe.prototype.get=va,Pe.prototype.has=ma,Pe.prototype.set=ba;var _a=Pe,Kn=_a,$a=pt,wa=Hn;function Oa(){this.size=0,this.__data__={hash:new Kn,map:new(wa||$a),string:new Kn}}var Sa=Oa;function xa(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var Aa=xa,Ea=Aa;function Da(e,t){var n=e.__data__;return Ea(t)?n[typeof t=="string"?"string":"hash"]:n.map}var yt=Da,ja=yt;function Ta(e){var t=ja(this,e).delete(e);return this.size-=t?1:0,t}var Ca=Ta,Ma=yt;function Ia(e){return Ma(this,e).get(e)}var Pa=Ia,ka=yt;function za(e){return ka(this,e).has(e)}var Ra=za,La=yt;function Ga(e,t){var n=La(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var Ua=Ga,Na=Sa,qa=Ca,Fa=Pa,Ha=Ra,Ba=Ua;function ke(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ke.prototype.clear=Na,ke.prototype.delete=qa,ke.prototype.get=Fa,ke.prototype.has=Ha,ke.prototype.set=Ba;var Vn=ke,Ka=pt,Va=Hn,Ya=Vn,Wa=200;function Ja(e,t){var n=this.__data__;if(n instanceof Ka){var r=n.__data__;if(!Va||r.length<Wa-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Ya(r)}return n.set(e,t),this.size=n.size,this}var Za=Ja,Xa=pt,Qa=no,el=io,tl=oo,nl=lo,rl=Za;function ze(e){var t=this.__data__=new Xa(e);this.size=t.size}ze.prototype.clear=Qa,ze.prototype.delete=el,ze.prototype.get=tl,ze.prototype.has=nl,ze.prototype.set=rl;var il=ze,sl=Ut,ol=function(){try{var e=sl(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Yn=ol,Wn=Yn;function al(e,t,n){t=="__proto__"&&Wn?Wn(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var Nt=al,ll=Nt,cl=ft;function ul(e,t,n){(n!==void 0&&!cl(e[t],n)||n===void 0&&!(t in e))&&ll(e,t,n)}var Jn=ul;function fl(e){return function(t,n,r){for(var s=-1,o=Object(t),a=r(t),l=a.length;l--;){var c=a[e?l:++s];if(n(o[c],c,o)===!1)break}return t}}var dl=fl,pl=dl,hl=pl(),yl=hl,gt={},gl={get exports(){return gt},set exports(e){gt=e}};(function(e,t){var n=$e,r=t&&!t.nodeType&&t,s=r&&!0&&e&&!e.nodeType&&e,o=s&&s.exports===r,a=o?n.Buffer:void 0,l=a?a.allocUnsafe:void 0;function c(f,d){if(d)return f.slice();var u=f.length,v=l?l(u):new f.constructor(u);return f.copy(v),v}e.exports=c})(gl,gt);var vl=$e,ml=vl.Uint8Array,bl=ml,Zn=bl;function _l(e){var t=new e.constructor(e.byteLength);return new Zn(t).set(new Zn(e)),t}var $l=_l,wl=$l;function Ol(e,t){var n=t?wl(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var Sl=Ol;function xl(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var Al=xl,El=we,Xn=Object.create,Dl=function(){function e(){}return function(t){if(!El(t))return{};if(Xn)return Xn(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),jl=Dl,Tl=Object.prototype;function Cl(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Tl;return e===n}var Qn=Cl,Ml=jl,Il=Rn,Pl=Qn;function kl(e){return typeof e.constructor=="function"&&!Pl(e)?Ml(Il(e)):{}}var zl=kl,Rl=Ye,Ll=Te,Gl="[object Arguments]";function Ul(e){return Ll(e)&&Rl(e)==Gl}var Nl=Ul,er=Nl,ql=Te,tr=Object.prototype,Fl=tr.hasOwnProperty,Hl=tr.propertyIsEnumerable,Bl=er(function(){return arguments}())?er:function(e){return ql(e)&&Fl.call(e,"callee")&&!Hl.call(e,"callee")},nr=Bl,Kl=Array.isArray,Ze=Kl,Vl=9007199254740991;function Yl(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Vl}var rr=Yl,Wl=Lt,Jl=rr;function Zl(e){return e!=null&&Jl(e.length)&&!Wl(e)}var qt=Zl,Xl=qt,Ql=Te;function ec(e){return Ql(e)&&Xl(e)}var tc=ec,Xe={},nc={get exports(){return Xe},set exports(e){Xe=e}};function rc(){return!1}var ic=rc;(function(e,t){var n=$e,r=ic,s=t&&!t.nodeType&&t,o=s&&!0&&e&&!e.nodeType&&e,a=o&&o.exports===s,l=a?n.Buffer:void 0,c=l?l.isBuffer:void 0,f=c||r;e.exports=f})(nc,Xe);var sc=Ye,oc=rr,ac=Te,lc="[object Arguments]",cc="[object Array]",uc="[object Boolean]",fc="[object Date]",dc="[object Error]",pc="[object Function]",hc="[object Map]",yc="[object Number]",gc="[object Object]",vc="[object RegExp]",mc="[object Set]",bc="[object String]",_c="[object WeakMap]",$c="[object ArrayBuffer]",wc="[object DataView]",Oc="[object Float32Array]",Sc="[object Float64Array]",xc="[object Int8Array]",Ac="[object Int16Array]",Ec="[object Int32Array]",Dc="[object Uint8Array]",jc="[object Uint8ClampedArray]",Tc="[object Uint16Array]",Cc="[object Uint32Array]",k={};k[Oc]=k[Sc]=k[xc]=k[Ac]=k[Ec]=k[Dc]=k[jc]=k[Tc]=k[Cc]=!0,k[lc]=k[cc]=k[$c]=k[uc]=k[wc]=k[fc]=k[dc]=k[pc]=k[hc]=k[yc]=k[gc]=k[vc]=k[mc]=k[bc]=k[_c]=!1;function Mc(e){return ac(e)&&oc(e.length)&&!!k[sc(e)]}var Ic=Mc;function Pc(e){return function(t){return e(t)}}var kc=Pc,vt={},zc={get exports(){return vt},set exports(e){vt=e}};(function(e,t){var n=Mn,r=t&&!t.nodeType&&t,s=r&&!0&&e&&!e.nodeType&&e,o=s&&s.exports===r,a=o&&n.process,l=function(){try{var c=s&&s.require&&s.require("util").types;return c||a&&a.binding&&a.binding("util")}catch{}}();e.exports=l})(zc,vt);var Rc=Ic,Lc=kc,ir=vt,sr=ir&&ir.isTypedArray,Gc=sr?Lc(sr):Rc,or=Gc;function Uc(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var ar=Uc,Nc=Nt,qc=ft,Fc=Object.prototype,Hc=Fc.hasOwnProperty;function Bc(e,t,n){var r=e[t];(!(Hc.call(e,t)&&qc(r,n))||n===void 0&&!(t in e))&&Nc(e,t,n)}var Kc=Bc,Vc=Kc,Yc=Nt;function Wc(e,t,n,r){var s=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var l=t[o],c=r?r(n[l],e[l],l,n,e):void 0;c===void 0&&(c=e[l]),s?Yc(n,l,c):Vc(n,l,c)}return n}var Jc=Wc;function Zc(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var Xc=Zc,Qc=9007199254740991,eu=/^(?:0|[1-9]\d*)$/;function tu(e,t){var n=typeof e;return t=t??Qc,!!t&&(n=="number"||n!="symbol"&&eu.test(e))&&e>-1&&e%1==0&&e<t}var lr=tu,nu=Xc,ru=nr,iu=Ze,su=Xe,ou=lr,au=or,lu=Object.prototype,cu=lu.hasOwnProperty;function uu(e,t){var n=iu(e),r=!n&&ru(e),s=!n&&!r&&su(e),o=!n&&!r&&!s&&au(e),a=n||r||s||o,l=a?nu(e.length,String):[],c=l.length;for(var f in e)(t||cu.call(e,f))&&!(a&&(f=="length"||s&&(f=="offset"||f=="parent")||o&&(f=="buffer"||f=="byteLength"||f=="byteOffset")||ou(f,c)))&&l.push(f);return l}var fu=uu;function du(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var pu=du,hu=we,yu=Qn,gu=pu,vu=Object.prototype,mu=vu.hasOwnProperty;function bu(e){if(!hu(e))return gu(e);var t=yu(e),n=[];for(var r in e)r=="constructor"&&(t||!mu.call(e,r))||n.push(r);return n}var _u=bu,$u=fu,wu=_u,Ou=qt;function Su(e){return Ou(e)?$u(e,!0):wu(e)}var cr=Su,xu=Jc,Au=cr;function Eu(e){return xu(e,Au(e))}var Du=Eu,ur=Jn,ju=gt,Tu=Sl,Cu=Al,Mu=zl,fr=nr,dr=Ze,Iu=tc,Pu=Xe,ku=Lt,zu=we,Ru=Q,Lu=or,pr=ar,Gu=Du;function Uu(e,t,n,r,s,o,a){var l=pr(e,n),c=pr(t,n),f=a.get(c);if(f){ur(e,n,f);return}var d=o?o(l,c,n+"",e,t,a):void 0,u=d===void 0;if(u){var v=dr(c),E=!v&&Pu(c),O=!v&&!E&&Lu(c);d=c,v||E||O?dr(l)?d=l:Iu(l)?d=Cu(l):E?(u=!1,d=ju(c,!0)):O?(u=!1,d=Tu(c,!0)):d=[]:Ru(c)||fr(c)?(d=l,fr(l)?d=Gu(l):(!zu(l)||ku(l))&&(d=Mu(c))):u=!1}u&&(a.set(c,d),s(d,c,r,o,a),a.delete(c)),ur(e,n,d)}var Nu=Uu,qu=il,Fu=Jn,Hu=yl,Bu=Nu,Ku=we,Vu=cr,Yu=ar;function hr(e,t,n,r,s){e!==t&&Hu(t,function(o,a){if(s||(s=new qu),Ku(o))Bu(e,t,a,n,hr,r,s);else{var l=r?r(Yu(e,a),o,a+"",e,t,s):void 0;l===void 0&&(l=o),Fu(e,a,l)}},Vu)}var Wu=hr;function Ju(e){return e}var yr=Ju;function Zu(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var Xu=Zu,Qu=Xu,gr=Math.max;function ef(e,t,n){return t=gr(t===void 0?e.length-1:t,0),function(){for(var r=arguments,s=-1,o=gr(r.length-t,0),a=Array(o);++s<o;)a[s]=r[t+s];s=-1;for(var l=Array(t+1);++s<t;)l[s]=r[s];return l[t]=n(a),Qu(e,this,l)}}var tf=ef;function nf(e){return function(){return e}}var rf=nf,sf=rf,vr=Yn,of=yr,af=vr?function(e,t){return vr(e,"toString",{configurable:!0,enumerable:!1,value:sf(t),writable:!0})}:of,lf=af,cf=800,uf=16,ff=Date.now;function df(e){var t=0,n=0;return function(){var r=ff(),s=uf-(r-n);if(n=r,s>0){if(++t>=cf)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var pf=df,hf=lf,yf=pf,gf=yf(hf),vf=gf,mf=yr,bf=tf,_f=vf;function $f(e,t){return _f(bf(e,t,mf),e+"")}var wf=$f,Of=ft,Sf=qt,xf=lr,Af=we;function Ef(e,t,n){if(!Af(n))return!1;var r=typeof t;return(r=="number"?Sf(n)&&xf(t,n.length):r=="string"&&t in n)?Of(n[t],e):!1}var Df=Ef,jf=wf,Tf=Df;function Cf(e){return jf(function(t,n){var r=-1,s=n.length,o=s>1?n[s-1]:void 0,a=s>2?n[2]:void 0;for(o=e.length>3&&typeof o=="function"?(s--,o):void 0,a&&Tf(n[0],n[1],a)&&(o=s<3?void 0:o,s=1),t=Object(t);++r<s;){var l=n[r];l&&e(t,l,r,o)}return t})}var Mf=Cf,If=Wu,Pf=Mf,kf=Pf(function(e,t,n){If(e,t,n)}),mr=kf;const q={},mt=h.reactive({}),br=function(e){if(e.name)if(q[e.name])console.warn("重复组件名:"+e.name);else{let t=mr({},ut,e);q[e.name]=t,mt[t.name]={name:t.name,type:t.type,label:t.label,icon:t.icon},tt.vm?tt.vm.component(e.name,q[e.name]):console.error("组件注册失败，缺少app")}else console.warn("缺少组件名")},zf=function(e){Array.isArray(e)?e.forEach(t=>{q[t]&&(delete q[t],delete mt[t])}):e&&typeof e=="string"&&q[e]&&(delete q[e],delete mt[e])},Rf=function(){return Object.values(q)},Ft=function(e){e instanceof Array?e.forEach(t=>{br(t)}):typeof e=="object"&&br(e)},Lf=function(){Object.values(q).forEach(t=>{tt.vm?(q[t.name]=mr({},ut,t),tt.vm.component(t.name,q[t.name])):console.error("组件注册失败，缺少app")})},Gf=[{name:"显示隐藏",action:"show",target:"component",valueType:"boolean",value:!0},{name:"轮换显示隐藏",action:"toggle",target:"component",valueType:"undefined",value:null},{name:"发送数据",action:"sendData",target:"component",valueType:"object",value:null},{name:"打开外链",action:"href",target:"url",valueType:"string",value:""},{name:"页面切换",action:"singleModule",target:"modules",valueType:"string",value:""},{name:"开关弹窗",action:"popup",target:"module",valueType:"string",value:""}],Qe={get level(){return[{name:"主内容区",type:"content"},{name:"覆盖弹层",type:"overlayer"}]},get events(){return[{name:"点击",event:"click",pams:"",actions:[],actionValue:{}},{name:"定时任务",event:"interval",pams:{delay:1e3},actions:[],actionValue:{}},{name:"延迟任务",event:"timeout",pams:{delay:1e3},actions:[],actionValue:{}}]},get component(){return[{name:"图表",type:"chart"},{name:"文本",type:"text"},{name:"表格",type:"table"},{name:"形状",type:"shape"},{name:"菜单",type:"menu"},{name:"媒体",type:"media"},{name:"地图",type:"map"},{name:"3D",type:"3d"},{name:"其它",type:"other"}]},get actions(){return Gf},get dataTypes(){return[{name:"静态数据",type:"source"},{name:"远程数据",type:"remote"},{name:"本地数据",type:"local"}]}};var Re=[];const Le={get items(){return mt},getComponentItems:Rf,getComponentDefaultData(e){let t=q[e];if(!t)return{};let n={},r=t.mixins||[],s={};for(const o of r)o.props&&Object.assign(s,o.props);Object.assign(s,t.props);for(const o in s)if(Object.hasOwnProperty.call(s,o)){const a=s[o];typeof a.default=="function"?n[o]=a.default.call():n[o]=a.default}return n.id="sprite_"+K(10),n.name=e,n.type=t.type||"",n},getComponentEvents(e){let t=q[e];if(!t)return[];let n=[],r=t.emits||[];for(const s in r)n.push({name:r[s],event:r[s],pams:"",actions:/^solo-/.test(e)?null:[]});return n},getEvents(e){return[...Qe.events,...this.getComponentEvents(e)]},add(e){if(e)if(Array.isArray(e))e.forEach(t=>{Re.find(n=>n.name==t.name)?console.warn(t.name+"组件名重复"):Re.push(t)});else return Re.find(t=>t.name==e.name)?(console.warn(e.name+"组件名重复"),!1):(Re.push(e),!0)},removeAll(){Re=[],zf(Object.keys(q))},install(e){e?Array.isArray(e)?e.forEach(t=>{this.add(t)&&Ft(t)}):this.add(e)&&Ft(e):Ft(Re)},reload(){Lf()}},ce={},D=h.reactive({}),x={},A={},ue=h.reactive({}),ge={};let Uf=1,Nf=1,_r=1;const $r=function(e,t={}){let n=Le.getComponentDefaultData(e),r=n.title,s={id:null,gpid:null,mid:null,name:n.name,type:n.type,title:r?r+_r++:"元件 "+_r++,x:n.x||0,y:n.y||0,width:n.width||0,height:n.height||0,data:n.data||"",opacity:n.opacity||100,visible:n.visible||!0,selected:n.selected||!1,hover:n.hover||!1,background:n.background,border:n.border,shadow:n.shadow,anim:n.anim||{}};return Object.assign(s,t),s.id||(s.id="sprite_"+K(10)),s},wr=function(e,t){let n=h.reactive({});return typeof e=="string"&&Le.items[e]?(Object.assign(n,$r(e,t)),A[n.id]=n,ce[n.id]=n,n):typeof e=="object"?e.id&&A[e.id]?(t?Object.assign(A[e.id],t):console.warn("元件"+e.id+"已存在"),A[e.id]):e.name?(Object.assign(n,$r(e.name,e)),A[n.id]=n,ce[n.id]=n,A[n.id]):(console.error("元件添加失败",e),null):null},Or=function(e){return A[e]?(delete A[e],delete ce[e],e):!1},Sr=function(e={}){let t={type:"content",name:"vx-module",title:"页面"+Uf++,x:0,y:0,components:[]};return Object.assign(t,e),t.id||(t.id="mdu_"+K(10)),t},et=function(e,t){if(e)return D[e]||(D[e]=Sr(Object.assign({id:e},t)),ce[e]=D[e]),D[e].components||(D[e].components=[]),D[e];if(t){let n=Sr(t);return D[n.id]=n,ce[n.id]=D[n.id],D[n.id]}else return null},xr=function(e){return D[e]?(delete D[e],delete ce[e],e):!1},Ar=function(e={}){let t=h.reactive({id:null,gpid:null,mid:null,name:"vx-sprite-group",type:"group",title:"组合"+Nf++,x:0,y:0,width:0,height:0,opacity:100,visible:!0,selected:!1,hover:!1,padding:"",background:{},border:{},shadow:{},anim:{},components:[]});return Object.assign(t,e),t.id||(t.id="group_"+K(10)),t},Ht=function(e,t){if(e)return x[e]?Object.assign(x[e],t):(x[e]=Ar(Object.assign({id:e},t)),ce[e]=x[e]),x[e];{let n=Ar(t);return x[n.id]=n,ce[n.id]=n,x[n.id]}},Er=function(e){return x[e]?(delete x[e],delete ce[e],e):!1},F=function(e){let t={id:null,gpid:null,mid:null,visible:null,name:null,type:null,zIndex:null};for(const n in t)Object.hasOwnProperty.call(t,n)&&(t[n]=e[n]||null);return t},Dr=function(e){return D[e].components&&D[e].components.length>0&&D[e].components.map(n=>({id:n.id,zIndex:n.zIndex})).sort((n,r)=>r.zIndex-n.zIndex)[0].zIndex||0},ee=h.reactive({}),Ge=function(e){if(e&&typeof e=="object"){let t=e.id=e.id||"AC_"+K(10);return ee[t]=e,t}else return null},Bt=function(e){ee[e]&&delete ee[e]},qf=function(e){return ee[e]},Ff=function(){return ee},Oe=function(e){if(e){let t=[];if(e instanceof Array)for(const n in e)t.push(ee[e[n]]);else typeof e=="string"&&ee[e]&&t.push(ee[e]);return t}else return Object.values(ee)},Kt=function(){Object.keys(ee).forEach(t=>{delete ee[t]})},Hf=Object.freeze(Object.defineProperty({__proto__:null,clearAction:Kt,delActionData:Bt,getActionData:qf,getActionList:Oe,getActionsData:Ff,setActionData:Ge},Symbol.toStringTag,{value:"Module"}));function Bf(e,t){let n=t.id;return{style:{cursor:j.clickCursor},onClickCapture:function(r){if(S.emit(R.CLICK_SPRITE,F(t),r),e.actions){let s=B(Oe(e.actions));e.actionValue&&typeof e.actionValue=="object"&&s.forEach(o=>{e.actionValue[o.id]&&(o.value=e.actionValue[o.id])}),S.execute(s,n)}}}}const jr=function(e,t,n){let r=B(Oe(e));for(let s=0,o=r.length;s<o;s++)n&&r[s].value&&typeof r[s].value=="object"?Object.assign(r[s].value,n):n&&(r[s].value=n);S.execute(r,t)};function Kf(e,t,n){let r={};if(n&&q[n]){let o=(q[n].emits||[]).find(a=>a==e.event);o&&typeof o=="string"?/^[a-zA-Z][-_a-zA-Z0-9_-]{1,32}$/.test(o)?r["on"+o.toLowerCase().replace(/( |^)[a-z]/g,a=>a.toUpperCase())]=function(a){/^solo-/.test(o)&&a?e.actions&&e.actions instanceof Array&&e.actions.length>0?jr(e.actions,t,a):S.execute(B(Oe(a)),t):e.actions&&e.actions instanceof Array&&jr(e.actions,t,a)}:console.warn(o+"无效的事件名定义"):console.warn(e.event+"事件没有定义")}return r}function Vf(e,t){let n=null;return{timeout:"1",onTimeout(r){let s=r.detail.value;if(n&&(clearTimeout(n),n=null),s=="mounted"){let a=(e.pams||{}).delay||1e3;n=setTimeout(()=>{e.actions&&S.execute(Oe(e.actions),t)},parseInt(a))}}}}let de={};const bt={add(e,t=1e3,n){let r=n||"it_"+K(7);return de[r]&&clearInterval(de[r]),de[r]=setInterval(e,t),r},del(e){if(e)de[e]&&(clearInterval(de[e]),delete de[e]);else{for(const t in de)clearInterval(de[t]);de={}}}};function Yf(e,t){let n=null;return{interval:"1",onInterval(r){if(n&&(bt.del(n),n=null),r.detail.value=="mounted"){let o=(e.pams||{}).delay||1e3;n=bt.add(()=>{e.actions&&S.execute(Oe(e.actions),t)},parseInt(o))}}}}function Tr(e,t={},n=""){let r={},s=t.id;return n&&(r={style:{}}),j.interaction?e.forEach(o=>{switch(o.event){case"click":Object.assign(r,Bf(o,t));break;case"timeout":Object.assign(r,Vf(o,s));break;case"interval":Object.assign(r,Yf(o,s));break;default:Object.assign(r,Kf(o,s,n))}}):t.type=="group"&&!t.gpid?Object.assign(r,{onClickCapture(o){o.stopPropagation(),S.emit(R.CLICK_SPRITE,F(t),o)},onDblclickCapture(o){o.stopPropagation(),S.emit(R.DBLCLICK_SPRITE,F(t),o)},onMousedownCapture(o){S.emit(R.MOUSEDOWN_SPRITE,F(t),o)},onMouseoverCapture(o){S.emit(R.MOUSEOVER_SPRITE,F(t),o)},onMouseoutCapture(o){S.emit(R.MOUSEOUT_SPRITE,F(t),o)},onMouseupCapture(o){S.emit(R.MOUSEUP_SPRITE,F(t),o)},onMouseleaveCapture(o){S.emit(R.MOUSELEAVE_SPRITE,F(t),o)},onMouseenterCapture(o){S.emit(R.MOUSEENTER_SPRITE,F(t),o)}}):Object.assign(r,{onClick(o){o.stopPropagation(),S.emit(R.CLICK_SPRITE,F(t),o)},onMousedown(o){S.emit(R.MOUSEDOWN_SPRITE,F(t),o)},onMouseover(o){S.emit(R.MOUSEOVER_SPRITE,F(t),o)},onMouseout(o){S.emit(R.MOUSEOUT_SPRITE,F(t),o)},onMouseup(o){S.emit(R.MOUSEUP_SPRITE,F(t),o)},onMouseleave(o){S.emit(R.MOUSELEAVE_SPRITE,F(t),o)},onMouseenter(o){S.emit(R.MOUSEENTER_SPRITE,F(t),o)}}),r}const Wf=function(e){return e&&typeof e=="object"?e.id?D[e.id]?(console.warn("模块"+e.id+"已存在"),null):et(e.id,e):et(null,e):typeof e=="string"?D[e]?(console.warn("模块"+e+"已存在"),null):et(e):et()},Vt=function(e,t="default"){t&&e&&typeof e!="string"&&(D[t]&&D[t].components?D[t].components.push(e):console.warn("模块添加元件数据失败"))},Yt=function(e,t="default"){return t&&e?D[t]&&D[t].components?le(D[t].components,"id",e):(console.warn("模块删除元件数据失败"),!1):(console.warn("mid && id 无效"),!1)},Jf=function(e){return xr(e)},Zf=function(e){return D[e]||null},Xf=function(){return D},Qf=function(e,t="type"){if(e){let n=Object.values(D);return typeof e=="string"?n.filter(r=>r[t]==e):typeof e=="function"?n.filter(r=>e(r)):n}else return Object.values(D)},Cr=function(e="default"){return D[e]&&D[e].components?D[e].components:[]},ed=function(){Object.keys(D).forEach(t=>{xr(t)})},Mr=function(e,t={}){let n=Object.assign({id:e.id,gpid:e.gpid,mid:e.mid,visible:e.visible,name:e.name,title:e.title,type:e.type,zIndex:e.zIndex},t);return ue[n.id]=n,ue[n.id]},Ir=function(e,t="default"){if(e&&typeof e=="object"&&e.id&&x[e.id])return console.warn("组合"+e.id+"已存在"),null;let n=null;e?n=Ht(e.id,Object.assign({mid:t},e)):n=Ht(null,{mid:t}),n.zIndex||(n.zIndex=Dr(t)+1);let r=Mr(n);return Vt(r,n.mid),ge[n.id]=h.watch(n,s=>{ue[s.id]&&Object.keys(ue[s.id]).forEach(a=>{ue[s.id][a]=s[a]})}),n},Wt=function(e,t){t&&e&&typeof e!="string"&&(x[t]&&x[t].components?x[t].components.push(e):console.warn("模块添加元件数据失败"))},Pr=function(e,t){let n=!1;return t&&e&&x[t]&&x[t].components&&(n=le(x[t].components,"id",e)),n||console.warn("模块删除元件数据失败"),n},td=function(e,t="default"){if(Array.isArray(e)){let n={x1:0,y1:0,x2:0,y2:0},r=Cr(t),s=[],o=[],a=[];if(e.forEach((c,f)=>{let d=r.find(v=>v.id==c),u=d?d.type=="group"?x[c]:A[c]:null;if(u)if(f==0?(n.x1=u.x,n.y1=u.y,n.x2=u.x+u.width,n.y2=u.y+u.height):(n.x1=u.x<n.x1?u.x:n.x1,n.y1=u.y<n.y1?u.y:n.y1,n.x2=u.x+u.width>n.x2?u.x+u.width:n.x2,n.y2=u.y+u.height>n.y2?u.y+u.height:n.y2),u.type=="group"){let v=u.components?u.components.map(E=>E.id):[];o.push(...v),s.push(u.id)}else o.push(c);else a.push(c)}),a.length>0)return console.warn(a.join(),"元件无法组合"),!1;s.length>0&&s.forEach(c=>{kr(c)}),Jt(e,!1);let l=Ir({x:n.x1,y:n.y1,width:n.x2-n.x1,height:n.y2-n.y1},t);return l?(e.forEach(c=>{A[c]&&(A[c].x-=n.x1,A[c].y-=n.y1,A[c].gpid=l.id,A[c].hover=!1,A[c].selected=!1,Wt(Nr(A[c]),l.id))}),l):!1}else return!1},kr=function(e){return e&&x[e]&&x[e].components&&Yt(x[e].id,x[e].mid)?(ge[e]&&typeof ge[e]=="function"&&ge[e](),x[e].components.forEach(t=>{A[t.id].x+=x[e].x,A[t.id].y+=x[e].y,A[t.id].gpid=null,Vt(t,t.mid)}),Er(e)):!1},zr=function(e){return x[e]||null},Rr=function(){return x},Lr=function(){return Object.values(x)},Gr=function(){Object.keys(x).forEach(t=>{Er(t)})},nd=Object.freeze(Object.defineProperty({__proto__:null,addElement:Wt,bind:td,clearGroupsData:Gr,createSimpleGroup:Mr,delElement:Pr,getGroup:zr,getGroupArrData:Lr,getGroups:Rr,newGroupData:Ir,unbind:kr},Symbol.toStringTag,{value:"Module"})),Ur=function(e,t=!0){if(A[e]&&A[e].mid){let n=Yt(e,A[e].mid);return t&&Or(e),n&&ge[e]&&typeof ge[e]=="function"&&ge[e](),!!n}else console.warn("删除模块内元件失败");return!1},rd=function(e){Object.keys(e).forEach(n=>{delete e[n]})},id=function(e){if(!e)return console.warn("添加元件失败,无数据信息"),!1;if(!e.mid)return console.warn("添加元件失败,无模块id"+mid),!1;e.zIndex||(e.zIndex=Dr(e.mid)+1);let t=Nr(e);if(e.gpid&&Ht(e.gpid))Wt(t,e.gpid);else if(et(e.mid))Vt(t,e.mid);else return console.warn("添加元件失败",t),!1;return ge[e.id]=h.watch(e,n=>{ue[n.id]&&Object.keys(ue[n.id]).forEach(s=>{ue[n.id][s]=n[s]})}),A[e.id]},Nr=function(e,t={}){let n=Object.assign({id:e.id,gpid:e.gpid,mid:e.mid,visible:e.visible,name:e.name,title:e.title,type:e.type,zIndex:e.zIndex},t);return ue[n.id]=n,ue[n.id]},sd=function(e,t="default",n=null){let r=null;if(typeof e=="string"&&typeof t=="object"?r=wr(e,t):typeof e=="object"&&(r=wr(e,{mid:t,gpid:n})),id(r))return A[r.id];throw"添加元件失败"},Jt=function(e,t=!0){if(e){if(Array.isArray(e))return e.forEach(n=>{Ur(n,t)}),!0;if(typeof e=="string")return Ur(e,t)}return!1},od=function(){return A},ad=function(e){let t=Object.values(A);return e?t.filter(n=>n.mid==e):t},ld=function(e){return A[e]?(Object.assign(A[e],Object.assign({},Le.getComponentDefaultData(A[e].name),A[e])),A[e]):null},cd=function(){Object.keys(A).forEach(t=>{rd(A[t]),Or(t)})},Zt=Wf,ud=Jf,fd=Xf,dd=Zf,Xt=Qf,qr=Cr,Fr=ed,_t=sd,pd=Jt,Hr=od,Qt=ad,te=ld,Br=cd,en=nd,$t=zr,Kr=Rr,Vr=Lr,Yr=Gr,Wr=function(e){if(A[e])return Jt(e);if(x[e]&&Array.isArray(x[e].components)&&x[e].components.length>0)return x[e].components.forEach(t=>{Wr(t.id)}),x[e].gpid?Pr(e):Yt(e,x[e].mid)},Jr=function(e){Array.isArray(e)&&e.length>0?e.forEach(t=>{if(typeof t=="object"){let n=[];t.components&&(n=t.components,delete t.components),Zt(t),n.forEach(r=>{if(r.type=="group"){let s=[];r.components&&(s=r.components,delete r.components),en.newGroupData(r,t.id),s.forEach(o=>{_t(o,t.id,o.gpid)})}else _t(r,t.id)})}}):Zt({id:"default"})},tn=function(){Br(),Yr(),Fr()},hd=Object.freeze(Object.defineProperty({__proto__:null,addSpriteData:_t,clearGroupsData:Yr,clearModulesData:Fr,clearSprites:tn,clearSpritesData:Br,delElementData:Wr,delModuleData:ud,delSpriteData:pd,elements:ce,fillData:Jr,getGroup:$t,getGroupArrData:Vr,getGroups:Kr,getModule:dd,getModuleComponents:qr,getModuleList:Xt,getModules:fd,getSpriteArrData:Qt,getSpriteData:te,getSpritesData:Hr,group:en,newMouleData:Zt},Symbol.toStringTag,{value:"Module"}));var yd=Ye,gd=Te,vd="[object Symbol]";function md(e){return typeof e=="symbol"||gd(e)&&yd(e)==vd}var nn=md,bd=Ze,_d=nn,$d=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,wd=/^\w*$/;function Od(e,t){if(bd(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||_d(e)?!0:wd.test(e)||!$d.test(e)||t!=null&&e in Object(t)}var Sd=Od,Zr=Vn,xd="Expected a function";function rn(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(xd);var n=function(){var r=arguments,s=t?t.apply(this,r):r[0],o=n.cache;if(o.has(s))return o.get(s);var a=e.apply(this,r);return n.cache=o.set(s,a)||o,a};return n.cache=new(rn.Cache||Zr),n}rn.Cache=Zr;var Ad=rn,Ed=Ad,Dd=500;function jd(e){var t=Ed(e,function(r){return n.size===Dd&&n.clear(),r}),n=t.cache;return t}var Td=jd,Cd=Td,Md=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Id=/\\(\\)?/g,Pd=Cd(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Md,function(n,r,s,o){t.push(s?o.replace(Id,"$1"):r||n)}),t}),kd=Pd;function zd(e,t){for(var n=-1,r=e==null?0:e.length,s=Array(r);++n<r;)s[n]=t(e[n],n,e);return s}var Rd=zd,Xr=Pt,Ld=Rd,Gd=Ze,Ud=nn,Nd=1/0,Qr=Xr?Xr.prototype:void 0,ei=Qr?Qr.toString:void 0;function ti(e){if(typeof e=="string")return e;if(Gd(e))return Ld(e,ti)+"";if(Ud(e))return ei?ei.call(e):"";var t=e+"";return t=="0"&&1/e==-Nd?"-0":t}var qd=ti,Fd=qd;function Hd(e){return e==null?"":Fd(e)}var Bd=Hd,Kd=Ze,Vd=Sd,Yd=kd,Wd=Bd;function Jd(e,t){return Kd(e)?e:Vd(e,t)?[e]:Yd(Wd(e))}var Zd=Jd,Xd=nn,Qd=1/0;function ep(e){if(typeof e=="string"||Xd(e))return e;var t=e+"";return t=="0"&&1/e==-Qd?"-0":t}var tp=ep,np=Zd,rp=tp;function ip(e,t){t=np(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[rp(t[n++])];return n&&n==r?e:void 0}var sp=ip,op=sp;function ap(e,t,n){var r=e==null?void 0:op(e,t);return r===void 0?n:r}var wt=ap;const ne=h.reactive({title:"",id:"A_"+K(10),creattime:null,uptime:null,cover:null,description:""}),re=h.reactive({width:j.width,height:j.height}),ve=h.reactive({backgroundColor:j.backgroundColor}),G=h.reactive({value:1,h:1,w:1,mode:j.scaleMode}),ni=h.computed(()=>{if(j.scale)if(G.mode=="auto")if(G.w>G.h){let e=re.width*(G.w-G.h)/2/G.value;return"scale("+G.value+")  translateX("+e+"px)"}else{let e=re.height*(G.h-G.w)/2/G.value;return"scale("+G.value+")  translateY("+e+"px)"}else return G.mode=="fill"?"scale("+G.w+","+G.h+")":"";else return""}),ri=function(e){if(e){let t=e;typeof t=="string"&&(t=document.querySelector(j.dom));let n=t.getBoundingClientRect();return n.width>0&&n.height>0?n:t.parentElement&&t.parentElement.localName!="body"?ri(t.parentElement):{width:window.innerWidth,height:window.innerHeight}}},ii=function(e){let t=ri(j.dom)||{width:window.innerWidth,height:window.innerHeight},n=t.height/e.height,r=t.width/e.width;return n<r?{value:n,h:n,w:r}:{value:r,h:n,w:r}},Z=h.reactive({host:"",method:"GET",headers:{}}),si=function(e){return e.id?ne.id=e.id:ne.id="A_"+K(10),e.title&&(ne.title=e.title),e.creattime&&(ne.creattime=e.creattime),e.uptime&&(ne.uptime=e.uptime),e.cover&&(ne.cover=e.cover),e.description&&(ne.description=e.description),e.width&&(re.width=e.width),e.height&&(re.height=e.height),e.scaleMode&&(G.mode=e.scaleMode),Object.assign(G,ii(re)),Object.assign(ve,e.background),Object.assign(Z,e.network),window.addEventListener("resize",t=>{Object.assign(G,ii(re))}),{info:ne,size:re,scale:G,transform:ni,background:ve}},lp={info:ne,size:re,background:ve},oi=function(){re.width=j.width,re.height=j.height;for(const e in ve)Object.hasOwnProperty.call(ve,e)&&delete ve[e];ve.backgroundColor=j.backgroundColor,G.mode=j.scaleMode,Object.assign(Z,{host:"",method:"GET",headers:{}}),Object.assign(ne,{title:"",id:"A_"+K(10),creattime:null,uptime:null,cover:null,description:""})},ai=function(){return{info:ne,size:re,scale:G,transform:ni,background:ve,get network(){return Z}}},cp=Object.freeze(Object.defineProperty({__proto__:null,appBase:lp,getAppData:ai,initAppData:si,network:Z,resetAppData:oi},Symbol.toStringTag,{value:"Module"}));var up=$e,fp=up.isFinite;function dp(e){return typeof e=="number"&&fp(e)}var pp=dp;let sn="token",on="json";function hp(e){sn=Z.token||"token",on=Z.responseType||"json";let t=/^(?!https?:\/\/)/.test(e.url)?Z.host+e.url:e.url,n=localStorage.getItem(sn)?{Authorization:localStorage.getItem(sn)}:{},r=e.customize||{},s={"Access-Control-Allow-Origin":"*","Content-Type":"application/json"};(!Z.headers||typeof Z.headers=="string"&&(Z.headers==""||Z.headers=="null"))&&(s={});let o=Object.assign({method:e.method||Z.method,mode:Z.mode||"cors",signal:e.signal,headers:new Headers(Object.assign(s,n,e.headers))},r);return o.method.toUpperCase()=="POST"?o.body=o.headers.get("Content-Type")=="application/json"?JSON.stringify(e.data):e.data:t=/\?/.test(t)?t+"&"+zt(e.data):t+"?"+zt(e.data),new Promise((a,l)=>{fetch(t,o).then(c=>on?c[on]():c.json(),l).then(a)})}const Ue={},an=[];class yp extends We{constructor(t){super(),this.id="R_"+K(10),this.controller=new AbortController,this.signal=this.controller.signal,this.isloading=!1,this.status="wait",this.options=t,this.data=null,this.err=null}request(t){this.status!="request"&&(this.isloading=!0,this.status="request",this.emit("request",this),hp({url:this.options.url||"",data:this.options.body||{},method:this.options.method,signal:this.signal}).then(n=>{this.data=n,this.status="success",this.isloading=!1,this.err=null,this.emit("success",n),t&&t(this)},n=>{this.status="success",this.isloading=!1,this.err=n,this.emit("error",n),t&&t(this)}))}destroy(){this.controller&&this.controller.abort(),this.controller=null,this.signal=null,this.isloading=null,this.status=null,this.options=null,this.data=null,this.err=null,Ue[this.id]&&(le(an,"id",this.id),delete Ue[this.id])}}function gp(e){let t=e.url||"",n=e.body||{},r=(t+JSON.stringify(n)).split("").sort().join(""),s=an.find(a=>a.test==r);if(s&&Ue[s.id])return Ue[s.id];let o=new yp(e);return an.push({id:o.id,test:r}),Ue[o.id]=o,Ue[o.id]}class vp extends We{constructor(t,n,r,s,o){super(),this.id="RD_"+K(10),this.url=t,this.body=r,this.method=s,this.data=h.reactive({}),this.sourceData=null,this.loading=h.ref(!1),this.isloading=!1,this.itval=o||0,this.it=null,this.status="wait",this.err=null,this.extractRule=n?h.reactive(n):h.reactive({});let a=gp({url:t,body:mn(r),method:s});a.on("request",()=>{this.loading.value=!0,this.isloading=!0,this.status="request"}),a.on("success",l=>{this.sourceData=l,this.status="success",this.loading.value=!1,this.isloading=!1,this.err=null,this.fillData(l),this.emit("success",this)}),a.on("error",l=>{this.status="success",this.loading.value=!1,this.isloading=!1,this.err=l,this.emit("error",l)}),this.req=a,this.unwatch=null,this.watchRule()}watchRule(){this.stopWatch(),this.watch=h.watch(this.extractRule,()=>{this.sourceData&&this.fillData(this.sourceData)}),this.sourceData&&this.fillData(this.sourceData)}stopWatch(){this.unwatch&&(this.unwatch(),this.unwatch=null)}setData(t={}){t.url&&(this.url=t.url,this.req.options.url=t.url),t.method&&(this.method=t.method,this.req.options.method=t.method),t.body&&(this.body=t.body,this.req.options.body=mn(t.body)),pp(t.itval)&&(this.itval=t.itval)}setExtractRule(t){if(this.extractRule instanceof Array&&t instanceof Array||this.extractRule instanceof Object&&t instanceof Object&&!Array.isArray(this.extractRule)&&!Array.isArray(t)){for(const n in this.extractRule)delete this.extractRule[n];Object.assign(this.extractRule,t)}else this.extractRule=h.reactive(B(t)),this.watchRule()}getExtractRule(){return B(this.extractRule)}request(t){this.req.request(t),this.setinterval(this.itval)}setinterval(t=0){j.interaction&&t&&t>0&&(this.it=bt.add(()=>{this.req.request()},t*1e3))}stopInterval(){this.it&&(bt.del(this.it),this.it=null)}clearData(){this.status=="request"&&this.req.controller&&this.req.controller.abort(),Object.keys(this.data).forEach(n=>{delete this.data[n]})}fillData(t){this.clearData(),this.extractRule&&(this.extractRule.x||this.extractRule.name||this.extractRule instanceof Array)?Object.assign(this.data,{data:kt(t,this.extractRule)}):Object.assign(this.data,{data:t})}destroy(){this.req.destroy(),this.clearData(),this.stopWatch(),this.stopInterval(),this.extractRule=null}}function li(e,t,n,r,s){return new vp(e,t,n,r,s)}const M={},Ne=h.reactive([]),mp=function(){return h.reactive({x:{name:"",path:"",mapKey:""},y:[]})},ci=function(){return Ne},Ot=function(e,t=null,n=null,r=null,s=null){let o=null;if(Q(e))o=li(e.url,e.extractRule,e.body,e.method,e.itval),e.id&&(o.id=e.id),Ne.push(o),M[o.id]=o;else if(typeof e=="string")if(!M[e])o=li(e,t,n,r,s),Ne.push(o),M[o.id]=o;else return M[e];return o},ln=function(e){le(Ne,"id",e),M[e].destroy(),delete M[e]},ui=function(e){if(e)if(M[e])ln(e);else for(let t in M)M[t].url==e&&ln(t);else Object.keys(M).forEach(n=>{ln(n)}),Ne.splice(0,Ne.length)},fi=function(e){if(M[e])return M[e];for(let t in M)if(M[t].url==e)return M[t];return null},cn=function(){ui()},di=function(e=!1,t="",n){if(t&&M[t])M[t].request(n);else for(let r in M)if(M[r].status!="success"||M[r].err||e)if(t){if(M[r].url==t){M[r].request(n);return}}else M[r].request(n)},bp=Object.freeze(Object.defineProperty({__proto__:null,add:Ot,clearRemote:cn,createExtractRule:mp,del:ui,getList:ci,getRemote:fi,remotes:M,requestData:di},Symbol.toStringTag,{value:"Module"})),I={},me=h.reactive([]),pi=function(e="",t="",n="source"){return{id:"GD_"+K(10),name:t,type:n,value:e instanceof Object?h.reactive(e):h.ref(e),uptime:new Date().getTime()}},un=function(e){return h.reactive({get id(){return e.id||""},get type(){return e.type||""},name:e.name,value:e.value,uptime:e.uptime||""})},fn=function(e,t="",n="source"){if(Q(e)&&e.id)return I[e.id]||(e.type=="remote"&&(e.value=Ot(e.value).id),I[e.id]=un(e),me.push(I[e.id])),I[e.id];if(e){let r={};return n=="remote"&&(e=Ot(e).id),r=pi(e,t,n),I[r.id]=un(r),me.push(I[r.id]),I[r.id]}else return console.warn("无效全局数据添加"),!1},_p=function(e,t){let n=null;if(typeof e=="string"&&Q(t)&&I[e]?(n=e,I[n]=t):Q(e)&&typeof e.id=="string"&&I[e.id]&&(n=e.id,I[n]=e),n){let r=me.findIndex(s=>s.id==n);if(r>-1)return me[r]=I[n]}return!1},$p=function(e){I[e]&&(le(me,"id",e),delete I[e])},wp=function(e){return I[e]||null},hi=function(){return me},dn=function(){Object.keys(I).forEach(t=>{delete I[t]}),me.splice(0,me.length)},Op=Object.freeze(Object.defineProperty({__proto__:null,GData:I,addGData:fn,clearGlobal:dn,default:I,delGData:$p,editGData:_p,getGData:wp,getGDataList:hi},Symbol.toStringTag,{value:"Module"})),ie={},qe=h.reactive([]),Sp=function(e){let t=Object.assign({id:"PD_"+K(10),uptime:new Date().getTime()},e);return t.name&&!t.title&&(t.title=t.name),h.reactive(t)},yi=function(e){if(Q(e)){if(e.id&&ie[e.id])return console.warn("插件存在"),null;if(e.url){let t=Sp(e);return ie[t.id]=t,qe.push(t),ie[t.id]}}return console.warn("插件添加失败",e),null},xp=function(e){if(ie[e])le(qe,"id",e),delete ie[e];else if(e){let n=Object.values(ie).find(r=>r.url==e);n&&ie[n.id]&&(le(qe,"id",n.id),delete ie[n.id])}},Ap=function(e){return ie[e]||null},gi=function(){return qe},pn=function(){Object.keys(ie).forEach(t=>{delete ie[t]}),qe.splice(0,qe.length)},Ep=Object.freeze(Object.defineProperty({__proto__:null,addPlugin:yi,clearPlugin:pn,delPlugin:xp,getPlugin:Ap,getPluginList:gi},Symbol.toStringTag,{value:"Module"}));function Dp(e){let t=e?B(e):{};tn(),Kt(),dn(),cn(),pn();let n=[],r=[];t.modules&&(n=t.modules,delete t.modules),t.actions&&(r=t.actions,delete t.actions),t.remote&&t.remote instanceof Array&&(t.remote.forEach(s=>{Ot(s)}),delete t.remote),t.globalData&&(fn({id:"GD_query",name:"url参数",type:"temp",value:{data:Nn()}}),t.globalData.forEach(s=>{fn(s)}),delete t.globalData),Array.isArray(t.plugins)&&(t.plugins.forEach(s=>{yi(s)}),delete t.plugins),si(t),Jr(n),r.forEach(s=>{Ge(s)}),S.emit(R.DATA_LOADED,!0),di(!0)}function jp(...e){let t=new Date().getTime(),n={id:"A_"+K(10),title:"",creattime:t,uptime:t,cover:"",description:"",background:{backgroundColor:"#111111"},width:1080,height:768,scaleMode:"auto",network:{},globalData:[],modules:[],actions:[],plugins:[],remote:[]};return Object.assign({},n,...e)}const V={getData(){let e=ai(),t=B(Xt());t.forEach(r=>{r.components&&Array.isArray(r.components)&&(r.components=r.components.map(s=>{if(s.type=="group"){let o=$t(s.id);return o.components&&(o.components=o.components.map(a=>{let l=te(a.id);return l.selected=!1,l})),o.selected=!1,o}else{let o=te(s.id);return o.selected=!1,o}}))});let n=B(hi());return n.forEach((r,s)=>{r.type=="temp"&&n.splice(s,1)}),B({id:e.info.id,title:e.info.title,creattime:e.info.creattime,uptime:e.info.uptime,cover:e.info.cover,description:e.info.description,width:e.size.width,height:e.size.height,scaleMode:e.scale.mode,background:e.background,network:e.network,globalData:n,modules:t,actions:Oe(),plugins:gi(),remote:ci().map(r=>({id:r.id,url:r.url,body:r.body||"",method:r.method||"",itval:r.itval||0,extractRule:r.extractRule||""}))})},init:Dp,...cp,...hd,...Hf,...Op,...Ep,getElement(e){return te(e)||$t(e)},getElements(){return[...Vr(),...Qt()]},getTemplateData:jp,clearDataAll(){tn(),Kt(),dn(),cn(),pn(),oi(),gn()}},{events:Tp}=Qe,vi=function(e,t){let n=Tp.find(r=>r.event==e)||Le.getComponentEvents(t).find(r=>r.event==e);return n?B(n):!1},Se=function(e,t,n=!1){let r=te(e);return t?n?r.events?r.events.findIndex(s=>s.event==t):-1:r.events?r.events.find(s=>s.event==t):null:r.events||null},Cp=function(e,t,n){let r=Se(e,t);if(r)return r;let s=te(e),o=vi(t,s.name);return s&&o?(s.events||(s.events=[]),n&&(o.pams=n),s.events.push(o),s.events[s.events.length-1]):(console.warn(s?t+"事件名称不对":"缺少组件数据"),null)},Mp=function(e,t,n){let r=Se(e,t,!0);if(r>-1){let s=te(e);return s.events[r].pams=n,s.events[r]}return null},Ip=function(e,t){let n=Se(e,t,!0);if(n>-1){let r=te(e);return r.events.splice(n,1),r.events}return null};let{actions:Pp}=Qe;const kp=function(e,t="",n,r=""){let s=Pp.find(o=>o.action==e);return s?s.target=="component"?Ge({action:s.action,target:t,value:typeof n<"u"?n:s.value,description:r||s.name+te(t).title}):s.target=="url"?Ge({action:s.action,target:t,value:typeof n<"u"?n:s.value,description:r||s.name}):Ge({action:e,target:t,value:n,description:r||s.name}):(console.warn(e+" 动作不存在"),null)},zp=function(e){return e.id?Ge(e):(console.warn("没有要修改的动作信息"),null)},Rp=function(e,t,n=""){if(n&&typeof t=="string"){let r=Se(t,n);return r?r.actions.findIndex(s=>s==e)<0&&r.actions.push(e):console.warn(t+"中"+n+"事件不存在"),r}else if(typeof t=="object"&&t.actions&&t.actions instanceof Array)return t.actions.push(e),t},Lp=function(e,t,n,r){if(n&&typeof t=="string"){let s=Se(t,n);return s?typeof r<"u"&&(s.actionValue||(s.actionValue={}),s.actionValue[e]=r):console.warn(t+"中"+n+"事件不存在"),s}},Gp=function(e,t,n="",r=!1){if(n&&typeof t=="string"){let s=Se(t,n);return s&&le(s.actions,"",e),r&&Bt(e),s}else if(typeof t=="object"&&t.actions&&t.actions instanceof Array)return le(t.actions,"",e),r&&Bt(e),t},Up=function(e,t){let n=[];if(e){let r=te(e);if(Array.isArray(r.events))if(t){let s=r.events.find(o=>o.event==t);s&&(n=s.actions.map(o=>({sname:r.title,sid:r.id,event:s.event,id:o})))}else n=r.events.map(s=>s.actions?s.actions.map(o=>({sname:r.title,sid:r.id,event:s.event,id:o})):[]).flat()}else n=Qt().map(r=>r.events&&r.events.length>0?r.events.map(s=>s.actions?s.actions.map(o=>({sname:r.title,sid:r.id,event:s.event,id:o})):[]).flat():[]).flat();return n},hn=B,Np=kt;let xe={},yn=[];const gn=function(){yn.forEach(e=>{e()}),yn=[];for(const e in xe)xe[e]=null;xe={}},vn=function(e){if(typeof e!="string")return e;if(/^RD_\S{10}$/.test(e)&&M[e])return M[e].data;{let t=e,n=null;if(/.\?+./.test(e)){let r=e.split("?");t=r[0],n=r[1]}if(/(^GD_\S{10})|(^GD_query)$/.test(t)&&I[t])if(I[t].type=="remote"){let r=fi(I[t].value);return r?n?(xe[e]||(xe[e]=h.ref(null),yn.push(h.watch(r.data,s=>{xe[e].value=wt(s.data||s,n)},{immediate:!0}))),xe[e]):r.data:null}else return n?wt(I[t].value,n):I[t].value}return null},mn=function(e){let t={};return e&&Array.isArray(e)&&e.forEach(n=>{if(Q(n))if(typeof n.value=="string"&&n.key){let r=vn(n.value);r?h.isReactive(r)?t[n.key]=n.path?wt(r.data,n.path):r.data:t[n.key]=n.path?wt(r,n.path):r:t[n.key]=n.value}else n.key&&(t[n.key]=n.value)}),t},qp=function(e,t="up"){const n=V.elements,r=V.getElement(e);if(r){if(!r.mid){console.warn("页面上找不到"+e);return}}else{console.warn("元件不存在"+e);return}let s=qr(r.mid).map(o=>({id:o.id,zIndex:o.zIndex})).sort((o,a)=>a.zIndex-o.zIndex);if(t=="up"){let o=s.findIndex(a=>a.id==e);if(o>0){let a=s[o-1].id,l=n[a].zIndex;n[a].zIndex=n[e].zIndex,n[e].zIndex=l}}else if(t=="down"){let o=s.findIndex(a=>a.id==e);if(o<s.length-1&&o>-1){let a=s[o+1].id,l=n[a].zIndex;n[a].zIndex=n[e].zIndex,n[e].zIndex=l}}else if(t=="top"){let o=s.findIndex(a=>a.id==e);if(o>0){n[e].zIndex=s[0].zIndex;for(let a=0;a<o;a++)n[s[a].id].zIndex--}}else if(t=="bottom"){let o=s.findIndex(a=>a.id==e);if(o<s.length-1&&o>-1){n[e].zIndex=s[s.length-1].zIndex;for(let a=o+1,l=s.length;a<l;a++)n[s[a].id].zIndex++}}},mi=function(e,t,n=null){const r=Hr(),s=Kr();if(r[e]){let o=hn(r[e]);return o.title+="_c",delete o.id,delete o.zIndex,Object.assign(o,t),_t(o,o.mid,n)}else if(s[e]){let o=hn(s[e]);o.title+="_c",delete o.id,delete o.zIndex,Object.assign(o,t);let a=[];o.components&&(a=o.components,delete o.components);let l=en.newGroupData(o,o.mid);return a.forEach(c=>{mi(c.id,{gpid:l.id},l.id)}),l}},Fp=Object.freeze(Object.defineProperty({__proto__:null,addAction:Rp,addEvent:Cp,changeModuleShow:function(e,t){Xt().forEach(n=>{if(t){if(typeof t=="string"){if(n.id==t)return}else if(t instanceof Array&&t.find(r=>r==n.id))return}n.type!="fixed"&&(n.id==e?n.visible=!0:n.visible=!1)})},clear:gn,copy:mi,createActionData:kp,editAction:Lp,editActionData:zp,editEvent:Mp,extractData:Np,getBodyData:mn,getDataSource:vn,getEvent:Se,getSpriteActions:Up,jsonData:hn,newEventData:vi,removeAction:Gp,removeEvent:Ip,setZindex:qp},Symbol.toStringTag,{value:"Module"}));function Y(e,t,n=""){let r=null;if(e?(r=h.resolveComponent(e),r==e&&(console.warn(r+"组件没有找到"),r="div")):(console.warn("数据缺少组件"+t),r="div"),typeof t=="string"){const s=te(t)||$t(t);if(!s)return;let o={...s,key:t};if(s.id&&Object.assign(o,Tr(s.events||[],s,e)),o.name&&delete o.name,o.mid&&delete o.mid,o.anim&&o.anim.name&&j.interaction?o.class=o.anim.name:typeof o.anim=="string"&&delete o.anim,o.data){let a=vn(o.data);a&&(h.isReactive(a)?o.data=a.data||a:o.data=a)}return h.h(r,o)}else if(typeof t<"u"){let s={...t};return(t.events||t.type=="group")&&Object.assign(s,Tr(t.events||[],t,e)),s.ref=s.id,s.name&&delete s.name,s.mid&&delete s.mid,h.h(r,s,n)}else return h.h(r,{},"")}const Hp={name:"stage",props:{background:{type:Object,default(){return{}}},content:{type:Object,default(){return{}}},fixed:{type:Object,default(){return{}}},overlayer:{type:Object,default(){return{}}},popwin:{type:Object,default(){return{}}},slots:[Object,Array]},setup(e){const t=V.getModules(),n=V.getAppData(),r=h.reactive({}),s=h.isVNode(e.slots)?[e.slots]:[];return s.length==0&&(Array.isArray(e.slots)?e.slots.forEach(o=>{s.push(h.h(o))}):e.slots&&s.push(h.h(e.slots))),h.watch(t,o=>{Object.assign(r,JSON.parse(JSON.stringify(o)))},{deep:!0}),h.onMounted(()=>{S.emit(R.STAGE_MOUNTED)}),()=>{var o=[];const a=[],l=[],c=[];for(const d in r)if(r.hasOwnProperty.call(r,d)){const u=r[d];(typeof u.visible>"u"||u.visible==!0)&&(u.type=="content"?a.push(u):u.type=="fixed"?l.push(u):u.type=="overlayer"&&c.push(u))}o.push(Y("vx-background",e.background),...s),a.length>0&&o.push(Y("vx-content",{modules:a})),l.length>0&&o.push(Y("vx-fixed",{modules:l})),c.length>0&&(o.unshift(Y("vx-mask")),o.push(Y("vx-overlayer",{modules:c}))),o.push(Y("vx-popwin",e.popwin)),o.push(Y("vx-message"));let f={position:"absolute",width:n.size.width?n.size.width+"px":"100%",height:n.size.height?n.size.height+"px":"100%",top:0,left:0,transformOrigin:"0 0",transform:n.transform.value,zIndex:0,userSelect:"none",...B(n.background)};return h.h("div",{id:"vx-stage",style:f,onclick(d){S.emit(R.CLICK_STAGE,d)}},o)}}},Bp={name:"vx-module",props:["components"],setup(e){const{components:t}=h.toRefs(e);return n=>{const r=[];return t.value&&t.value.forEach((s,o)=>{s.visible&&(s.type=="group"?r.push(Y("vx-sprite-group",s.id)):r.push(Y(s.name,s.id)))}),h.h("div",{id:n.id,style:n.style},r)}}},Kp={name:"vx-plane",props:["components"],setup(){return e=>{const t=[];return e.components&&e.components.forEach((n,r)=>{n.visible&&t.push(Y(n.name,n.id))}),h.h("div",{id:e.id,style:e.style},t)}}},Vp={name:"vx-popwin",render(){let e={position:"absolute",width:"100%",zIndex:5e4};return h.h("div",{id:"vx-popwin",style:e})}};let Yp={position:"absolute",width:"auto",height:"auto",top:0,left:0,zIndex:1e4};const Wp={name:"vx-content",props:["modules"],setup(e){return()=>{const t=e.modules,n=[];for(const r in t)if(t.hasOwnProperty.call(t,r)){const s=t[r];(typeof s.visible>"u"||s.visible==!0)&&n.push(Y("vx-module",s))}return h.h("div",{id:"vx-content",style:Yp},n)}}};let Jp={position:"absolute",width:"100%",top:0,left:0,zIndex:2e4};const Zp={name:"vx-fixed",props:["modules"],setup(e){return()=>{const t=e.modules,n=[];for(const r in t)if(t.hasOwnProperty.call(t,r)){const s=t[r];(typeof s.visible>"u"||s.visible==!0)&&n.push(Y("vx-module",s))}return h.h("div",{id:"vx-fixed",style:Jp},n)}}};let Xp={position:"absolute",width:"100%",height:"100%",top:0,left:0,zIndex:4e4};const Qp={name:"vx-overlayer",props:["modules"],setup(e){return()=>{const t=e.modules,n=[];for(const r in t)if(t.hasOwnProperty.call(t,r)){const s=t[r];(typeof s.visible>"u"||s.visible==!0)&&n.push(Y("vx-module",s))}return h.h("div",{id:"vx-overlayer",style:Xp},n)}}};let bi={position:"absolute",width:"100%",top:0,left:0,zIndex:99999999},eh={width:"60%",lineHeight:"18px",borderRadius:"6px",backgroundColor:"rgba(255, 240, 0, 0.66)",textAlign:"center",padding:"8px 5px",margin:"5px auto",boxShadow:"1px 1px 1px #00000022",fontSize:"14px",animation:"0.4s ease 0s 1 normal none running vx_enter"};const th={name:"vx-message",setup(){const e=h.reactive([]);S.addEventListener("message-send",n=>{e.length==0&&t(),e.push(n)});const t=function(){setTimeout(()=>{e.length>0&&(e.splice(0,1),e.length>0&&t())},3e3)};return()=>e.length>0?h.h("div",{id:"vx-message",style:bi},e.map(n=>h.h("div",{class:"message_item",style:eh},n))):h.h("div",{id:"vx-message",style:bi})}},nh={name:"vx-mask",render(){let e={position:"absolute",width:"100%",height:"100%",top:0,left:0,backgroundColor:"rgba(0, 0, 0, .8)",zIndex:3e4};return h.h("div",{id:"vx-mask",style:e,onClick:t=>{}})}};let rh={position:"absolute",width:"100%",height:"100%",top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0)",zIndex:1};const ih=[Bp,Kp,Vp,Qp,Wp,Zp,th,nh,{name:"vx-background",setup(e){return()=>{let t=Object.assign({},rh,e.style);return h.h("div",{id:"vx-background",style:t,onmousedown:n=>{S.emit(R.MOUSEDOWN_BACKGROUND,n)},onmouseup:n=>{S.emit(R.MOUSEUP_BACKGROUND,n)},onclick:n=>{S.emit(R.CLICK_BACKGROUND,n)}})}}},{name:"vx-sprite-group",props:{components:{type:Array,default(){return[]}}},setup(e){const{x:t,y:n,id:r}=h.toRefs(e);return h.provide("offsetX",t),h.provide("offsetY",n),s=>{const o=[];s.components&&s.components.forEach((l,c)=>{l.visible&&o.push(Y(l.name,l.id))});let a=["element_sprite",{element_selected:s.selected},{element_hover:s.hover}];return h.h("div",{id:r.value,style:s.style,class:a},o)}}},{name:"vx-sprite",setup(e,t){const{id:n}=h.toRefs(e);return r=>{let s="";typeof t.slots.default=="function"&&(s=t.slots.default());let o=["element_sprite",{element_selected:r.$parent.selected},{element_hover:r.$parent.hover}];return r.$parent.gpid&&(o=["element_sprite"]),h.h("div",{id:n.value||r.$parent.id,style:r.$parent.style,class:o},s)}}}],sh={install:e=>{ih.forEach(t=>{e.component(t.name,t)})}};window&&typeof window.Vue>"u"&&(window.Vue=qi);var X=null;const _i=function(e={}){return X?!1:(X=h.createApp(Hp,e),X.use(sh),X.mixin(ut),j.status="create",window&&(window.myapp=X),console.log("%c灿create","color:#0aa100"),!0)},oh=function(){if(X){let e=j.dom;return typeof e=="string"&&document.querySelector(e)||e instanceof HTMLElement?(X.mount(e),j.status="display",console.log("%c灿display","color:#0aa100"),!0):(console.error(e+"错误"),!1)}else return console.warn("app没有创建"),!1},$i=function(){X&&(X.unmount(),X=null,j.status="remove",console.log("%c灿remove","color:#0aa100"))},St=function(e){return e&&Object.assign(j,e),j},ah=function(){return X},tt={appSetup:j,get vm(){return X}},Fe={reviewData(e,t){if(t&&t.id){console.warn(t.id+"不能替换");return}Object.assign(e,t)},show(e,t){e&&(Array.isArray(e)?e.forEach(n=>{n.visible=t}):e.visible=t)},toggle(e){e&&(Array.isArray(e)?e.forEach(t=>{t.visible=!t.visible}):e.visible=!e.visible)},sendData(e,t){e&&(Array.isArray(e)?e.forEach(n=>{n.data=t}):e.data=t)},href(e,t="_blank"){e&&(t=="a"?window.location.href=e:window.open(e,t))},singleModule(e,t){e.filter(n=>n.type=="content").forEach(n=>{n.id==t?n.visible=!0:n.visible=!1})},popup(e,t){return e&&e.type=="overlayer"&&(typeof t=="boolean"?e.visible=t:e.visible=!e.visible),e}},xt={},nt=Qe.actions,wi=function(e,t,n){if(Fe[e]){let r=nt.find(s=>s.action==e);if(r){let s={};r.target=="component"||r.target=="components"?t instanceof Array?(s=[],t.forEach(o=>{s.push(V.getElement(o))})):t&&(s=V.getElement(t)):r.target=="app"?s=V.getAppData():r.target=="url"?s=t:r.target=="modules"?s=V.getModuleList():r.target=="module"&&(s=V.getModule(t)),Fe[e].call(r,s,n)}else{let s=V.getElement(t)||V.getModule(t);s&&(targetData=s),Fe[e].call({},targetData,n)}}else console.warn(item.action+"动作不存在")},At={[Ce.ACTION](e){e.data&&(e.data instanceof Array?e.data.forEach(t=>{wi(t.action,t.target,t.value)}):e.data instanceof Object&&typeof e.data!="function"&&wi(e.data.action,e.data.target,e.data.value))},[Ce.APP_ACTION](e){},useAction(e){let t={name:e.name||"无名动作",action:e.action||null,target:e.target||"component",valueType:e.valueType||null,value:e.value||""};nt.find(n=>n.action==t.action)?console.warn(e,"已存在"):t.action&&e.handle?Fe[t.action]?console.warn(t.action+"动作已存在"):(nt.push(t),Fe[t.action]=e.handle,xt[t.action]=t):t.action?console.warn(e,"缺少动作方法函数"):console.warn(e,"缺少action名称")},remove(e){if(xt[e]){let t=nt.findIndex(n=>n.action==e);t>-1&&nt.splice(t,1),delete Fe[e],delete xt[e]}},removeAll(){Object.keys(xt).forEach(t=>{this.remove(t)})}};for(const e in Ce){let t=Ce[e];S.addEventListener(t,At[t],At)}var bn=function(){},Et={},_n={},Dt={};function lh(e,t){e=e.push?e:[e];var n=[],r=e.length,s=r,o,a,l,c;for(o=function(f,d){d.length&&n.push(f),s--,s||t(n)};r--;){if(a=e[r],l=_n[a],l){o(a,l);continue}c=Dt[a]=Dt[a]||[],c.push(o)}}function Oi(e,t){if(e){var n=Dt[e];if(_n[e]=t,!!n)for(;n.length;)n[0](e,t),n.splice(0,1)}}function $n(e,t){e.call&&(e={success:e}),t.length?(e.error||bn)(t):(e.success||bn)(e)}function Si(e,t,n,r){var s=document,o=n.async,a=(n.numRetries||0)+1,l=n.before||bn,c=e.replace(/[\?|#].*$/,""),f=e.replace(/^(css|img|module|nomodule)!/,""),d,u,v;if(r=r||0,/(^css!|\.css$)/.test(c))v=s.createElement("link"),v.rel="stylesheet",v.href=f,d="hideFocus"in v,d&&v.relList&&(d=0,v.rel="preload",v.as="style");else if(/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(c))v=s.createElement("img"),v.src=f;else if(v=s.createElement("script"),v.src=f,v.async=o===void 0?!0:o,u="noModule"in v,/^module!/.test(c)){if(!u)return t(e,"l");v.type="module"}else if(/^nomodule!/.test(c)&&u)return t(e,"l");v.onload=v.onerror=v.onbeforeload=function(E){var O=E.type[0];if(d)try{v.sheet.cssText.length||(O="e")}catch(W){W.code!=18&&(O="e")}if(O=="e"){if(r+=1,r<a)return Si(e,t,n,r)}else if(v.rel=="preload"&&v.as=="style")return v.rel="stylesheet";t(e,O,E.defaultPrevented)},l(e,v)!==!1&&s.head.appendChild(v)}function ch(e,t,n){e=e.push?e:[e];var r=e.length,s=r,o=[],a,l;for(a=function(c,f,d){if(f=="e"&&o.push(c),f=="b")if(d)o.push(c);else return;r--,r||t(o)},l=0;l<s;l++)Si(e[l],a,n)}function He(e,t,n){var r,s;if(t&&t.trim&&(r=t),s=(r?n:t)||{},r){if(r in Et)throw"LoadJS";Et[r]=!0}function o(a,l){ch(e,function(c){$n(s,c),a&&$n({success:a,error:l},c),Oi(r,c)},s)}if(s.returnPromise)return new Promise(o);o()}He.ready=function(t,n){return lh(t,function(r){$n(n,r)}),He},He.done=function(t){Oi(t,[])},He.reset=function(){Et={},_n={},Dt={}},He.isDefined=function(t){return t in Et};/*!
	 Copyright 2018 Google Inc. All Rights Reserved.
	 Licensed under the Apache License, Version 2.0 (the "License");
	 you may not use this file except in compliance with the License.
	 You may obtain a copy of the License at

	     http://www.apache.org/licenses/LICENSE-2.0

	 Unless required by applicable law or agreed to in writing, software
	 distributed under the License is distributed on an "AS IS" BASIS,
	 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 See the License for the specific language governing permissions and
	 limitations under the License.
	*//*! lifecycle.mjs v0.1.1 */let jt;try{new EventTarget,jt=!0}catch{jt=!1}class uh{constructor(){this.e={}}addEventListener(t,n,r=!1){this.t(t).push(n)}removeEventListener(t,n,r=!1){const s=this.t(t),o=s.indexOf(n);o>-1&&s.splice(o,1)}dispatchEvent(t){return t.target=this,Object.freeze(t),this.t(t.type).forEach(n=>n(t)),!0}t(t){return this.e[t]=this.e[t]||[]}}var fh=jt?EventTarget:uh,dh=jt?Event:class{constructor(t){this.type=t}};class ph extends dh{constructor(t,n){super(t),this.newState=n.newState,this.oldState=n.oldState,this.originalEvent=n.originalEvent}}const Ae="active",rt="passive",Ee="hidden",De="frozen",wn="terminated",xi=typeof safari=="object"&&safari.pushNotification,hh="onpageshow"in self,yh=["focus","blur","visibilitychange","freeze","resume","pageshow",hh?"pagehide":"unload"],Ai=e=>(e.preventDefault(),e.returnValue="Are you sure?"),gh=e=>e.reduce((t,n,r)=>(t[n]=r,t),{}),vh=[[Ae,rt,Ee,wn],[Ae,rt,Ee,De],[Ee,rt,Ae],[De,Ee],[De,Ae],[De,rt]].map(gh),mh=(e,t)=>{for(let n,r=0;n=vh[r];++r){const s=n[e],o=n[t];if(s>=0&&o>=0&&o>s)return Object.keys(n).slice(s,o+1)}return[]},Tt=()=>document.visibilityState===Ee?Ee:document.hasFocus()?Ae:rt;class bh extends fh{constructor(){super();const t=Tt();this.s=t,this.i=[],this.a=this.a.bind(this),yh.forEach(n=>addEventListener(n,this.a,!0)),xi&&addEventListener("beforeunload",n=>{this.n=setTimeout(()=>{n.defaultPrevented||n.returnValue.length>0||this.r(n,Ee)},0)})}get state(){return this.s}get pageWasDiscarded(){return document.wasDiscarded||!1}addUnsavedChanges(t){!this.i.indexOf(t)>-1&&(this.i.length===0&&addEventListener("beforeunload",Ai),this.i.push(t))}removeUnsavedChanges(t){const n=this.i.indexOf(t);n>-1&&(this.i.splice(n,1),this.i.length===0&&removeEventListener("beforeunload",Ai))}r(t,n){if(n!==this.s){const r=this.s,s=mh(r,n);for(let o=0;o<s.length-1;++o){const a=s[o],l=s[o+1];this.s=l,this.dispatchEvent(new ph("statechange",{oldState:a,newState:l,originalEvent:t}))}}}a(t){switch(xi&&clearTimeout(this.n),t.type){case"pageshow":case"resume":this.r(t,Tt());break;case"focus":this.r(t,Ae);break;case"blur":this.s===Ae&&this.r(t,Tt());break;case"pagehide":case"unload":this.r(t,t.persisted?De:wn);break;case"visibilitychange":this.s!==De&&this.s!==wn&&this.r(t,Tt());break;case"freeze":this.r(t,De)}}}var _h=new bh;const jh="",Ei=js,On=V,it=Le,Di=ut,ji=At,Ti=S,Ci=Qe,Sn=R,Mi=Fp,Ii=bp,Pi=tt,ki=j,xn=function(e,t){return j.status=="none"||j.status=="remove"||j.status=="destroy"?(St(e),V.resetAppData(),_i(t)?(it.install(),Q(e)&&An(e),!0):(console.warn("应用已存在，不可重复创建"),!1)):(console.warn("应用创建失败"),!1)},An=function(e){let t=St({});ah()||_i()&&it.reload(),t.status!="display"?(typeof e=="string"?t=St({dom:e}):Q(e)&&(t=St(e)),oh()):console.warn("舞台已显示")},$h=function(){$i()},zi=function(e=!0){e&&(V.clearDataAll(),At.removeAll()),Le.removeAll(),S.clear(),gn(),$i(),j.status="destroy",console.log("%c灿destroy","color:#0aa100")},st=function(e){e instanceof Function?e(En):e&&typeof e=="object"&&e.install&&e.install instanceof Function&&e.install(En)},Ri=function({url:e,name:t}){return new Promise((n,r)=>{He(e,function(){typeof t=="string"?st(window[t]):Array.isArray(t)&&t.forEach(s=>{st(window[s])}),n()})})},Li=function(e){let t=e.components||[],n=e.actions||[],r=e.data||null,s=e.slots||null,o={width:e.width,height:e.height,backgroundColor:e.backgroundColor,scaleMode:e.scaleMode,dom:e.dom,interaction:e.interaction,clickCursor:e.clickCursor,scale:e.scale};Object.keys(o).forEach(c=>{typeof o[c]>"u"&&delete o[c]}),it.add(t),st(n);let l=xn(o,{slots:s});return On.init(r),l};_h.addEventListener("statechange",function(e){S.emit(Sn.PAGE_STATE,{state:e.newState,oldState:e.oldState})});const En={utils:Ei,rdata:On,component:it,componentMixin:Di,controller:ji,cmd:Ti,typeModel:Ci,EVENTS:Sn,helper:Mi,remote:Ii,app:Pi,appInfo:ki,use:st,useAsync:Ri,createApp:Li,displayStage:An,createStage:xn,destroyStage:zi};console.log("%crd-runtime:1.7.7","color:#0aa100"),"RD"in window||(window.RD=En),P.EVENTS=Sn,P.app=Pi,P.appInfo=ki,P.cmd=Ti,P.component=it,P.componentMixin=Di,P.controller=ji,P.createApp=Li,P.createStage=xn,P.destroyStage=zi,P.displayStage=An,P.helper=Mi,P.rdata=On,P.remote=Ii,P.removeStage=$h,P.typeModel=Ci,P.use=st,P.useAsync=Ri,P.utils=Ei,Object.defineProperty(P,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=rd-runtime.umd.js.map
